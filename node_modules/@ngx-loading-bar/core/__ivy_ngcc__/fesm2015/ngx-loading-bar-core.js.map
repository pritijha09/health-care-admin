{"version":3,"file":"ngx-loading-bar-core.js","sources":["ng:/@ngx-loading-bar/core/loading-bar.service.ts","ng:/@ngx-loading-bar/core/loading-bar.component.ts","ng:/@ngx-loading-bar/core/core.module.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { PLATFORM_ID, Inject } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\n@Injectable({ providedIn: 'root' })\nexport class LoadingBarService implements OnDestroy {\n  readonly progress$ = (new Subject<number>()).pipe(debounceTime(0)) as Subject<number>;\n\n  private _pendingRequests = 0;\n  private _value = 0;\n  private _incTimeout: any;\n\n  constructor(@Inject(PLATFORM_ID) private platformId: Object) {}\n\n  start(initialValue = 2) {\n    ++this._pendingRequests;\n    if (this._value === 0 || this._pendingRequests === 1) {\n      // Inserts the loading bar element into the dom, and sets it to 2%\n      this.set(this._pendingRequests === 1 && this._value > 0 ? this._value : initialValue);\n    }\n  }\n\n  stop() {\n    this.complete();\n    while (this._pendingRequests > 0) {\n      this.complete();\n    }\n  }\n\n  complete() {\n    if (this._pendingRequests === 0 && this._value === 0) {\n      return;\n    }\n\n    if (this._pendingRequests > 0) {\n      --this._pendingRequests;\n    }\n\n    if (this._pendingRequests === 0 || (this._pendingRequests === 0 && this._value > 0)) {\n      if (this._value !== 100) {\n        this.set(100);\n      }\n\n      // Attempt to aggregate any start/complete calls within 500ms:\n      setTimeout(() => this.set(0), 500);\n    }\n  }\n\n  /**\n   * Set the loading bar's width to a certain percent.\n   *\n   * @param n any value between 0 and 100\n   */\n  set(n) {\n    if (!isPlatformBrowser(this.platformId)) {\n      this._pendingRequests = 0;\n      return;\n    }\n\n    if (n === 0 && this._pendingRequests > 0) {\n      n = 2;\n    }\n\n    this._value = n;\n    this.progress$.next(n);\n\n    if (this._pendingRequests === 0) {\n      return;\n    }\n\n    // increment loadingbar to give the illusion that there is always\n    // progress but make sure to cancel the previous timeouts so we don't\n    // have multiple incs running at the same time.\n    clearTimeout(this._incTimeout);\n    if (this._value > 0 && this._value < 100) {\n      this._incTimeout = setTimeout(() => this.increment(), 250);\n    }\n  }\n\n  /**\n   * Increments the loading bar by a random amount\n   * but slows down as it progresses\n   */\n  increment(rnd = 0) {\n    if (rnd > 0) {\n      this.set(this._value + rnd);\n    }\n\n    const stat = this._value;\n    if (stat >= 0 && stat < 25) {\n      // Start out between 3 - 6% increments\n      rnd = (Math.random() * (5 - 3 + 1) + 3);\n    } else if (stat >= 25 && stat < 65) {\n      // increment between 0 - 3%\n      rnd = (Math.random() * 3);\n    } else if (stat >= 65 && stat < 90) {\n      // increment between 0 - 2%\n      rnd = (Math.random() * 2);\n    } else if (stat >= 90 && stat < 99) {\n      // finally, increment it .5 %\n      rnd = 0.5;\n    } else {\n      // after 99%, don't increment:\n      rnd = 0;\n    }\n\n    this.set(this._value + rnd);\n  }\n\n  ngOnDestroy() {\n    this.progress$.complete();\n  }\n}\n","import { Component, Input, ChangeDetectionStrategy, ViewEncapsulation } from '@angular/core';\nimport { LoadingBarService } from './loading-bar.service';\n\n@Component({\n  selector: 'ngx-loading-bar',\n  template: `\n    <ng-container *ngIf=\"(value !== null ? value : loader.progress$|async) as progress\">\n      <div id=\"loading-bar-spinner\" *ngIf=\"includeSpinner\" [style.color]=\"color\">\n        <div [style.width]=\"diameter\" [style.height]=\"diameter\" class=\"spinner-icon\"></div>\n      </div>\n      <div id=\"loading-bar\" *ngIf=\"includeBar\" [style.color]=\"color\">\n        <div class=\"bar\" [style.background]=\"color\" [style.height]=\"height\" [style.width]=\"progress + '%'\">\n          <div class=\"peg\" [style.height]=\"height\"></div>\n        </div>\n      </div>\n    </ng-container>\n  `,\n  preserveWhitespaces: false,\n  encapsulation: ViewEncapsulation.Emulated,\n  styleUrls: ['./loading-bar.component.scss'],\n  host: {\n    '[class.loading-bar-fixed]': 'fixed',\n  }\n})\nexport class LoadingBarComponent {\n  @Input() includeSpinner = true;\n  @Input() includeBar = true;\n  @Input() fixed = true;\n  @Input() color;\n  @Input() height;\n  @Input() diameter;\n  @Input() value = null;\n\n  constructor(public loader: LoadingBarService) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoadingBarComponent } from './loading-bar.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [LoadingBarComponent],\n  exports: [LoadingBarComponent],\n})\nexport class LoadingBarModule {}\n"]}